# Домашнее задание к занятию "Базы данных, их типы" - `Динейко Алексей`


---

### Задание 1

Для решения задач крупной строительной компании, которая занимается проектированием и девелопментом, важно выбрать подходящие системы управления базами данных (СУБД) для каждой предметной области. Рассмотрим каждую задачу отдельно и предложим оптимальные решения.

▎1.1. Бюджетирование проектов и финансовые отчёты

Для задач, связанных с бюджетированием проектов, формированием финансовых аналитических отчётов и прогнозированием рисков, лучше всего подойдут реляционные СУБД, такие как PostgreSQL или Microsoft SQL Server. Эти СУБД обеспечивают высокую целостность данных, поддержку транзакций и сложные запросы, что критично для финансовых данных. Они также позволяют создавать сложные аналитические отчёты с использованием SQL.

Хеширование: Если хеширование занимает много времени, можно рассмотреть использование API для параллельной обработки, такие как Apache Kafka для асинхронной обработки данных или Redis для кэширования результатов хеширования.

▎1.2. Лендинги и CRM

Для лендингов и CRM-систем лучше использовать NoSQL базы данных, такие как MongoDB или Couchbase. Эти СУБД обеспечивают гибкость в работе с неструктурированными данными и могут быстро обрабатывать большие объемы записей, что важно для маркетинга и продаж.

Одной СУБД: Да, можно использовать одну СУБД для обеих задач. Например, MongoDB может быть использована как для хранения данных лендингов, так и для CRM. Она позволяет легко масштабировать систему и обрабатывать данные в реальном времени.

▎1.3. База норм и правил

Для создания базы корпоративных норм и правил подойдёт реляционная СУБД, такая как PostgreSQL или MySQL. Эти системы обеспечивают простую и понятную структуру данных и позволяют легко управлять изменениями в правилах и нормах.

Использование существующей СУБД: Да, можно использовать уже существующую реляционную СУБД из предыдущих задач (например, PostgreSQL) для хранения норм и правил. Можно создать отдельную таблицу или схему для этой информации.

▎1.4. Логистика и маршруты доставки

Для задач логистики, связанных с формированием маршрутов доставки и распределением курьеров, лучше всего подойдёт реляционная СУБД с поддержкой пространственных данных, такая как PostgreSQL с расширением PostGIS. Это позволит эффективно работать с географическими данными и создавать сложные запросы для маршрутизации.

Подключение отдела закупок: Можно подключить отдел закупок к той же СУБД логистов, если данные между отделами пересекаются. Если же у отдела закупок есть специфические требования (например, работа с большим объёмом неструктурированных данных), можно рассмотреть создание отдельной СУБД, но интеграция через API остаётся хорошим вариантом.

▎1.5. Использование одной СУБД

В принципе, все перечисленные задачи можно решить с помощью одной реляционной СУБД, такой как PostgreSQL. Она достаточно мощная для работы с различными типами данных (структурированными и неструктурированными) и поддерживает расширения для работы с пространственными данными (PostGIS). 

Также можно рассмотреть использование гибридных решений, таких как CockroachDB или ArangoDB, которые поддерживают как реляционные, так и документные модели данных.

---

### Задание 2

▎2.1. Процесс пополнения баланса счёта телефона

Для успешного завершения транзакции по пополнению баланса счёта телефона можно выделить следующие шесть шагов:

1. Идентификация пользователя: Пользователь входит в систему (например, через мобильное приложение или веб-сайт) и предоставляет свои учетные данные для аутентификации. Это может включать ввод логина и пароля, а также подтверждение через двухфакторную аутентификацию.

2. Выбор метода пополнения: После успешной аутентификации пользователь выбирает опцию пополнения баланса. Он может выбрать способ пополнения (например, банковская карта, электронный кошелёк, наличные и т.д.) и вводит необходимую информацию (номер карты, сумму пополнения).

3. Проверка доступности средств: Система проверяет, достаточно ли средств на выбранном методе оплаты (например, на банковской карте или в электронном кошельке) для выполнения операции. Если средств недостаточно, транзакция отклоняется, и пользователь получает уведомление.

4. Создание транзакции: Если средства доступны, система создаёт запись о транзакции в базе данных, включая информацию о пользователе, сумме пополнения, времени операции и статусе транзакции (например, "в процессе").

5. Обработка платежа: Система отправляет запрос на обработку платежа к платёжному шлюзу или процессору. Платёжный шлюз проверяет данные и инициирует перевод средств с выбранного метода оплаты на баланс счёта телефона.

6. Подтверждение и обновление баланса: После успешного завершения обработки платежа платёжный шлюз отправляет подтверждение обратно в систему. Система обновляет баланс счёта телефона пользователя и меняет статус транзакции на "успешно завершена". Пользователь получает уведомление о том, что его баланс пополнен.

▎2.1.* Действия при автоплатеже

Если пополнение счёта телефона происходит через автоплатёж, процесс будет немного отличаться:

1. Настройка автоплатежа: Пользователь заранее настраивает автоплатёж в системе, указывая сумму, частоту (ежемесячно, еженедельно и т.д.) и метод оплаты (банковская карта, электронный кошелёк и т.д.). Эта информация сохраняется в системе.

2. Идентификация пользователя: При наступлении даты очередного автоплатежа система автоматически идентифицирует пользователя по сохранённым данным.

3. Проверка доступности средств: Система проверяет наличие достаточных средств на выбранном методе оплаты для выполнения автоплатежа.

4. Создание транзакции: Если средства доступны, система создаёт запись о транзакции для автоплатежа в базе данных с указанием суммы, даты и статуса "в процессе".

5. Обработка платежа: Система отправляет запрос на платёжный шлюз для обработки автоплатежа, аналогично процессу ручного пополнения.

6. Подтверждение и обновление баланса: После успешной обработки платежа платёжный шлюз отправляет подтверждение в систему. Баланс счёта телефона пользователя обновляется, и статус транзакции меняется на "успешно завершена". Пользователь может получить уведомление о выполнении автоплатежа.

---

### Задание 3

▎Преимущества SQL-систем по отношению к NoSQL

1. Структурированность данных: SQL-системы используют фиксированную схему (схему базы данных), что обеспечивает строгую структуру данных. Это позволяет легче управлять данными и поддерживать их целостность, что особенно важно для приложений с высокими требованиями к консистентности данных.

2. Поддержка сложных запросов: SQL предлагает мощный и гибкий язык запросов, который позволяет выполнять сложные операции, такие как объединение таблиц (JOIN), агрегирование и фильтрацию данных. Это делает SQL-системы более подходящими для аналитических задач и отчетности.

3. Транзакционная поддержка: SQL-системы обеспечивают поддержку ACID-принципов (атомарность, согласованность, изолированность, долговечность), что гарантирует надежность и целостность данных при выполнении транзакций. Это критично для финансовых и других бизнес-приложений, где ошибки могут иметь серьезные последствия.

4. Стандартизованный язык: SQL является стандартом для реляционных баз данных, что означает, что разработчики могут легко переходить между различными SQL-системами без необходимости изучения новых языков запросов. Это также упрощает обучение и интеграцию новых сотрудников.

5. Зрелость технологий: Реляционные базы данных существуют уже несколько десятилетий, что привело к высокому уровню зрелости и стабильности технологий. Они имеют широкий спектр инструментов и библиотек для мониторинга, резервного копирования и восстановления, что делает их более надежными в долгосрочной перспективе.

▎Преимущества NewSQL систем перед SQL и NoSQL

1. Совмещение преимуществ: NewSQL-системы стремятся объединить преимущества традиционных реляционных баз данных (ACID-принципы, структурированные данные) с масштабируемостью и производительностью NoSQL-систем. Это позволяет обрабатывать большие объемы данных и высокие нагрузки без потери надежности.

2. Масштабируемость: NewSQL-системы разработаны с учетом горизонтальной масштабируемости, что позволяет легко добавлять новые узлы в кластер для увеличения производительности и хранения данных. Это делает их более подходящими для современных облачных приложений и больших данных.

3. Современные архитектуры: NewSQL-системы часто используют распределенные архитектуры, которые обеспечивают высокую доступность и отказоустойчивость. Это позволяет избежать узких мест, которые могут возникать в традиционных SQL-системах при увеличении нагрузки.

4. Поддержка реального времени: Многие NewSQL-системы предлагают возможности обработки данных в реальном времени, что делает их идеальными для приложений, требующих немедленной реакции на события (например, финансовые транзакции или онлайн-игры).

5. Гибкость в моделировании данных: Хотя NewSQL-системы сохраняют реляционную модель, они часто предлагают большую гибкость в определении схемы и работе с данными, позволяя разработчикам адаптировать структуру базы данных под конкретные нужды приложения.

Таким образом, NewSQL-системы представляют собой эволюцию реляционных баз данных, предлагая лучшие характеристики как SQL, так и NoSQL решений.

---

### Задание 4

При выборе типа СУБД для работы с огромным количеством данных на кластере из 1000 машин необходимо учитывать несколько ключевых критериев:

▎Критерии выбора СУБД

1. Объем и структура данных: Если данные структурированы и требуют строгой схемы (например, реляционные данные), то реляционная СУБД (например, PostgreSQL или MySQL) может быть подходящим выбором. Если же данные полуструктурированные или неструктурированные (например, JSON, XML или текстовые файлы), то NoSQL-системы (например, MongoDB, Cassandra) могут оказаться более эффективными.

2. Требования к производительности: Для задач, требующих высокой производительности при чтении и записи данных, важно выбрать СУБД, способную масштабироваться горизонтально. NoSQL-системы, такие как Cassandra или HBase, хорошо справляются с высокими нагрузками благодаря своей архитектуре.

3. Поддержка транзакций: Если приложение требует строгой консистентности данных и поддержки транзакций (ACID), реляционные базы данных или NewSQL-системы (например, Google Spanner) будут предпочтительнее. В противном случае, если согласованность данных может быть ослаблена, можно рассмотреть NoSQL-решения.

4. Гибкость и масштабируемость: Важно учитывать возможность горизонтального масштабирования. Системы, которые могут легко добавлять новые узлы в кластер без значительных изменений в архитектуре, будут более предпочтительными для больших объемов данных.

5. Сложность запросов: Если необходимо выполнять сложные аналитические запросы и агрегации, реляционные базы данных могут предложить мощные возможности SQL. Однако для анализа больших объемов данных в реальном времени может подойти решение на базе NoSQL с поддержкой MapReduce или специализированные аналитические платформы.

▎Модель распределённых вычислений

Для обработки больших объемов данных на кластере из 1000 машин наиболее подходящей моделью распределённых вычислений будет MapReduce или его производные, такие как Apache Spark.

▎Почему именно MapReduce или Spark?

1. Обработка больших данных: MapReduce хорошо справляется с параллельной обработкой больших наборов данных, разбивая задачи на меньшие подзадачи, которые выполняются на различных узлах кластера. Это позволяет эффективно использовать ресурсы 1000 машин.

2. Гибкость: Apache Spark предлагает более высокую производительность по сравнению с традиционным MapReduce за счёт работы в памяти и поддерживает различные модели обработки данных (потоковая обработка, интерактивный анализ и т.д.), что делает его универсальным инструментом для обработки данных.

3. Поддержка различных источников данных: Spark может работать с различными источниками данных, включая HDFS, NoSQL-системы и реляционные базы данных. Это делает его подходящим выбором для гибкой архитектуры.

4. Удобство разработки: Spark предоставляет API на нескольких языках (Scala, Python, Java), что упрощает разработку и интеграцию с существующими системами.

5. Сообщество и экосистема: У Spark и других технологий на основе MapReduce есть активное сообщество и множество библиотек (например, для машинного обучения и графовой обработки), что упрощает разработку сложных приложений.

